---
layout: post
title: "Android opened - first looks inside"
date: 2008-10-22
comments: false
categories:
 - toolchain
 - sdk
 - android
---

<div class='post'>
<span style="font-weight: bold;">Update (Nov 12 '08)</span> Benno has got android <a href="http://benno.id.au/blog/2008/11/02/android-on-neo1973">running</a> on Openmoko. Gr8 job!<br /><br />News of the day! <a href="http://mobile.slashdot.org/mobile/08/10/21/1622200.shtml">Android is open</a>. First thing after returning from work was setting up the git download and build.<br /><br />Follow the download and build instructions <a href="http://source.android.com/download">here</a>.<br /><br /><span style="font-size:85%;">Tip: If you are running x86_64 box, make sure you install *-devel.i386 packages as well. You will keep getting errors otherwise, that the libraries found in /usr/lib64 weren't deemed good candidates by the build system for linking.</span><br /><br />For the description of each subdirectory of the project tree, check <a href="http://source.android.com/projects">this</a>.<br /><br />The things of interest are the toolchain and location of bare-bones libraries. Toolchains are located inside the prebuilt directory.<br /><br /><span style="font-size:85%;">mydroid $ prebuilt/linux-x86/toolchain/arm-eabi-4.2.1/arm-eabi/bin/gcc -v<br />Using built-in specs.<br />Target: arm-eabi<br />Configured with: ../../toolchain/android-toolchain/gcc-4.2.1/configure --prefix=/android/mathias/armdev/toolchain-eabi-4.2.1 --program-transform-name=s,^,arm-eabi-, --prefix=/android/mathias/armdev/toolchain-eabi-4.2.1 --target=arm-eabi --host=x86_64-unknown-linux-gnu --build=x86_64-unknown-linux-gnu --enable-languages=c,c++ --disable-libstdc__-v3 --disable-libssp --enable-threads --disable-nls --disable-libmudflap --with-float=soft --with-fpu=vfp --with-arch=armv5te --enable-target-optspace --with-abi=aapcs : (reconfigured) ../../toolchain/android-toolchain/gcc-4.2.1/configure --prefix=/android/mathias/armdev/toolchain-eabi-4.2.1 --program-transform-name=s,^,arm-eabi-, --prefix=/android/mathias/armdev/toolchain-eabi-4.2.1 --target=arm-eabi --host=x86_64-unknown-linux-gnu --build=x86_64-unknown-linux-gnu --enable-languages=c,c++ --disable-libstdc__-v3 --disable-libssp --enable-threads --disable-nls --disable-libmudflap --with-float=soft --with-fpu=vfp --with-arch=armv5te --enable-target-optspace --with-abi=aapcs<br />Thread model: single<br />gcc version 4.2.1</span><br /><br />The basic libraries are available under bionic subdirectory:<br /><span style="font-size:85%;">bionic/<br />bionic/libthread_db<br />bionic/linker<br />bionic/libdl<br />bionic/libstdc++<br />bionic/.git<br />bionic/libm<br />bionic/libc</span><br /><br />After your build is successful, the android binaries should be available under <span style="font-size:85%;">out/target/product/generic/obj/lib/</span><br /><br /><span style="font-size:85%;">mydroid $ file out/target/product/generic/obj/lib/libc.so<br />out/target/product/generic/obj/lib/libc.so: ELF 32-bit LSB shared object, ARM, version 1 (SYSV), stripped<br /></span><br />I tried to compile a simple helloworld.c, but no luck :(<br /><br /><span style="font-size:85%;">mydroid $ PATH=./prebuilt/linux-x86/toolchain/arm-eabi-4.2.1/libexec/gcc/arm-eabi/4.2.1:prebuilt/linux-x86/toolchain/arm-eabi-4.2.1/arm-eabi/bin/gcc:$PATH prebuilt/linux-x86/toolchain/arm-eabi-4.2.1/arm-eabi/bin/gcc hellodroid.c<br />Assembler messages:<br />Fatal error: Invalid -march= option: `armv5te'</span><br /><br />I can't wait until someone compiles python with this toolchain. I don't have enough time and know-how in how to arrange this toolchain in a manner so that Python's autotools can compile in it. Hopefully scratchbox or OpenEmbedded people will take up that task and we will soon have a Pydroid.</div>
